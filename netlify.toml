[build]
  # Build command - using npm instead of yarn to avoid private registry issues
  command = "npm run build:prod"

  # Directory that contains the deploy-ready HTML files and assets
  publish = "public"

  # Environment variables for build
  # Using Firebase v8 which doesn't require old grpc package
  # Exclude client bundle from secrets scanning - Firebase keys are meant to be public in client apps
  environment = { NODE_VERSION = "16.20.2", NPM_FLAGS = "--legacy-peer-deps", SECRETS_SCAN_OMIT_PATHS = "public/dist/bundle.js" }

# Redirect rules for single-page application
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

# Environment variables (you'll set these in Netlify dashboard)
# Required Firebase configuration:
# - FIREBASE_API_KEY
# - FIREBASE_AUTH_DOMAIN
# - FIREBASE_DATABASE_URL
# - FIREBASE_PROJECT_ID
# - FIREBASE_STORAGE_BUCKET
# - FIREBASE_MESSAGING_SENDER_ID
# - FIREBASE_APP_ID
# - FIREBASE_MEASUREMENT_ID
